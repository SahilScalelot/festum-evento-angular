<div class="popup table fixed w-full inset-0 z-40 h-screen">
    <div class="table-cell align-middle">
        <span (click)="closePopup()" class="absolute inset-0 bg-black bg-opacity-75"></span>
        <div [ngClass]="popClass" class="popin max-w-[100%] w-full mx-auto max-h-[calc(100vh-55px)] overflow-y-auto lg:px-9 relative">
            <div class="bg-brightGray p-7 space-y-7">
                <div class="flex justify-between items-center">
                    <h2>QR Code Scanner</h2>
                    <span (click)="closePopup()" class="cursor-pointer hover:opacity-60">
                        <svg fill="none" height="21" viewBox="0 0 21 21" width="21" xmlns="http://www.w3.org/2000/svg"> <path d="M20.2902 4.13628L13.9273 10.4999L20.2902 16.8631C21.2366 17.8099 21.2366 19.3437 20.2902 20.2905C19.8173 20.7634 19.1973 21 18.5776 21C17.9569 21 17.3368 20.7637 16.8643 20.2905L10.5 13.9265L4.13625 20.2904C3.66342 20.7633 3.04337 20.9999 2.42313 20.9999C1.80308 20.9999 1.18345 20.7637 0.710197 20.2904C-0.23625 19.344 -0.23625 17.8103 0.710197 16.8631L7.07289 10.4998L0.709835 4.13628C-0.236612 3.18982 -0.236612 1.65575 0.709835 0.709297C1.6561 -0.236432 3.18926 -0.236432 4.13589 0.709297L10.5 7.07288L16.8636 0.709297C17.8104 -0.236432 19.3437 -0.236432 20.2898 0.709297C21.2366 1.65575 21.2366 3.18982 20.2902 4.13628Z" fill="#2E363F"></path> </svg>
                      </span>
                </div>
                <div class="wrapper  -mt-14  space-y-3">
                    <div class="w-full block">
                        <select class="bg-white rounded-md flex w-full space-x-3 outline-0 px-6 py-3 relative arrow" (change)="onDeviceSelectChange($event)">
                            <option value="" [selected]="!currentDevice">No Device Selected</option>
                            <option *ngFor="let device of availableDevices" [value]="device.deviceId"
                                    [selected]="currentDevice && device.deviceId === currentDevice.deviceId">{{device.label}}</option>
                        </select>
                    </div>
                    <div class="w-full block">
                        <ng-container *ngIf="hasPermission === undefined">
                            <h2>Waiting for permissions.</h2>
                            <blockquote>If your device does not has cameras, no permissions will be asked.</blockquote>
                        </ng-container>
                        <ng-container *ngIf="hasPermission === false">
                            <h2>You denied the camera permission, we can't scan anything without it.</h2>
                        </ng-container>
                        <ng-container *ngIf="hasDevices === undefined">
                            <h2>Couldn't check for devices.</h2>
                            <blockquote>This may be caused by some security error.</blockquote>
                        </ng-container>
                        <ng-container *ngIf="hasDevices === false">
                            <h2>No devices were found.</h2>
                            <blockquote>I believe your device has no media devices attached to.</blockquote>
                        </ng-container>
                    </div>

                    <zxing-scanner [torch]="torchEnabled" [(device)]="currentDevice" (scanSuccess)="onCodeResult($event)"
                                   [formats]="formatsEnabled" [tryHarder]="tryHarder" (permissionResponse)="onHasPermission($event)"
                                   (camerasFound)="onCamerasFound($event)" (torchCompatible)="onTorchCompatible($event)"></zxing-scanner>
                </div>
            </div>
        </div>
    </div>
</div>
