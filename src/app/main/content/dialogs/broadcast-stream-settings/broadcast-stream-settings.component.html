<p-progressSpinner *ngIf="isLoading" [style]="{width: '50px', height: '50px'}" animationDuration=".5s" strokeWidth="8" class="absolute bg-white bg-opacity-25 backdrop-blur-sm inset-x-0 top-0 h-full w-full z-40" styleClass="custom-spinner absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"></p-progressSpinner>
<!-- Popup Add Event  -->
<div class="popup table fixed w-full inset-0 z-40 h-screen">
    <div class="table-cell align-middle">
        <span (click)="closePopup()" class="absolute inset-0 bg-black bg-opacity-75"></span>
        <div [ngClass]="popClass" class="popin max-w-2xl w-full mx-auto max-h-[calc(100vh-55px)] overflow-y-auto lg:px-9 relative">
            <div class="bg-brightGray p-7 space-y-7">
                <div class="flex justify-between items-center">
                    <h4>Stream Settings</h4>
                    <canvas id="preview"></canvas>
                    <span (click)="closePopup()" class="cursor-pointer hover:opacity-60">
            <svg fill="none" height="21" viewBox="0 0 21 21" width="21" xmlns="http://www.w3.org/2000/svg"> <path d="M20.2902 4.13628L13.9273 10.4999L20.2902 16.8631C21.2366 17.8099 21.2366 19.3437 20.2902 20.2905C19.8173 20.7634 19.1973 21 18.5776 21C17.9569 21 17.3368 20.7637 16.8643 20.2905L10.5 13.9265L4.13625 20.2904C3.66342 20.7633 3.04337 20.9999 2.42313 20.9999C1.80308 20.9999 1.18345 20.7637 0.710197 20.2904C-0.23625 19.344 -0.23625 17.8103 0.710197 16.8631L7.07289 10.4998L0.709835 4.13628C-0.236612 3.18982 -0.236612 1.65575 0.709835 0.709297C1.6561 -0.236432 3.18926 -0.236432 4.13589 0.709297L10.5 7.07288L16.8636 0.709297C17.8104 -0.236432 19.3437 -0.236432 20.2898 0.709297C21.2366 1.65575 21.2366 3.18982 20.2902 4.13628Z" fill="#2E363F"></path> </svg>
          </span>
                </div>
                <form class="space-y-3" [formGroup]="newBroadCastForm" novalidate>
                    <div class="">
                        <label class="input-titel">Select Webcam<span>*</span></label>
                        <select formControlName="webcam"  class="bg-white rounded-md flex w-full space-x-3 outline-0 px-6 py-3 relative arrow">
                            <option value="">Please Select Webcam</option>
                            <option *ngFor="let eventCategoryObj of videoDevices" [value]="eventCategoryObj.deviceId">{{eventCategoryObj.label}}</option>
                        </select>
                        <span class="top-full text-red-500 text-xs" *ngIf="newBroadCastForm.controls['webcam'].invalid && (newBroadCastForm.controls['webcam'].dirty || newBroadCastForm.controls['webcam'].touched)">
                          <span *ngIf="newBroadCastForm.controls['webcam'].errors.required">
                            Webcam is required.
                          </span>
                      </span>
                    </div>
                    <div class="">
                        <span class="input-titel">Select Microphone<span>*</span></span>
                        <select formControlName="microphone" class="bg-white rounded-md flex w-full space-x-3 outline-0 px-6 py-3 relative arrow" >
                            <option value="">Please Select Microphone</option>
                            <option *ngFor="let aud of audioDevices" [value]="aud.deviceId">{{aud.label}}</option>
                        </select>
                        <span class="top-full text-red-500 text-xs" *ngIf="newBroadCastForm.controls['microphone'].invalid && (newBroadCastForm.controls['microphone'].dirty || newBroadCastForm.controls['microphone'].touched)">
                          <span *ngIf="newBroadCastForm.controls['microphone'].errors.required">
                            Microphone is required.
                          </span>
                        </span>
                    </div>
                    <div class="">
                        <label class="input-titel">Select Channel Config<span>*</span></label>
                        <select formControlName="channel_config"  class="bg-white rounded-md flex w-full space-x-3 outline-0 px-6 py-3 relative arrow">
                            <option value="">Please Select Channel</option>
                            <option value="BASIC_LANDSCAPE">Basic: Landscape</option>
                            <option value="BASIC_PORTRAIT">Basic: Portrait</option>
                            <option value="STANDARD_LANDSCAPE">Standard: Landscape</option>
                            <option value="STANDARD_PORTRAIT">Standard: Portrait</option>
                        </select>
                        <span class="top-full text-red-500 text-xs" *ngIf="newBroadCastForm.controls['channel_config'].invalid && (newBroadCastForm.controls['channel_config'].dirty && newBroadCastForm.controls['channel_config'].touched)">
                          <span *ngIf="newBroadCastForm.controls['channel_config'].errors.required">
                            Channel config is required.
                          </span>
                        </span>
                    </div>
                </form>
                <div class="flex justify-end">
                    <div class="relative">
                        <button class="secondary py-2 px-14 mr-2 anim uppercase" type="submit" (click)="closePopup()">
                            <span [ngClass]="{'opacity-0': newBroadCastForm.disabled}">Cancel</span>
                        </button>
                        <button class="secondary py-2 px-14 anim uppercase" type="submit" (click)="saveSettings()">
                            <span [ngClass]="{'opacity-0': newBroadCastForm.disabled}">Save</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
