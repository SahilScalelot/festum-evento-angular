<div class="max-w-[1250px] w-full mx-auto flex space-x-5 overflow-hidden px-5">
    <div class="max-w-xs xl:max-w-sm w-full h-[784px] overflow-y-auto bg-white rounded-md">
        <div class="w-full px-7">
            <div class="flex items-center border-b border-[#DDDDDD] py-5">
                <strong class="text-[#25364F]">Message</strong>
                <div class="flex items-center justify-center w-[18px] h-[18px] rounded-full bg-primary/10 ml-1.5"><span class="text-sm text-primary font-bold">1</span></div>
            </div>
        </div>
        <div *ngFor="let user of users; let i = index" class="w-full chat_link cursor-pointer px-4 xl:px-7" [ngClass]="{ 'active': i === selectedIndex }" (click)="selectUser(i, user)">
            <div class="flex items-center border-b border-[#DDDDDD] py-5">
                <div class="w-12 h-12 rounded-full overflow-hidden cursor-pointer">
                    <img [src]="!!(user?.userid) && user.userid.profilepic !== '' ? constants?.baseImageURL + user.userid.profilepic : constants?.defaultImage" [alt]="user?.userid?.name" class="w-full object-cover"/>
                    <!--<img src="./assets/images/profile-2.png" alt="Elmer Laverty" class="w-full object-cover">-->
                </div>
                <div class="w-[calc(100%-48px)] pl-2.5">
                    <div class="flex items-center justify-between">
                        <strong class="block max-w-[150px] w-full text-sm truncate text-[#2E363F] pr-1.5">{{user.userid.name}}</strong>
                        <strong class="block text-sm text-[#FE4D5F] mt-1">{{ formatDate(user?.lastchatmessage?.timestamp)}}</strong>
                    </div>
                    <div class="flex items-center justify-between" *ngIf="user?.lastchatmessage?.lastmessageid?.contentType === 'text'">
                        <strong class="block max-w-[150px] w-full text-xs truncate text-[#9BA6A8] pr-1.5">{{user?.lastchatmessage?.lastmessageid?.content?.text?.message}}</strong>
                        <div class="flex items-center justify-center w-4 h-4 bg-[#FE4D5F] rounded-full mt-1"><span class="text-xs text-white ml-[1px]">{{user?.unseencount}}</span></div>
                    </div>
                    <div class="flex items-center justify-between" *ngIf="user?.lastchatmessage?.lastmessageid?.contentType === 'media'">
                        <ng-container *ngIf="user?.lastchatmessage?.lastmessageid?.content?.media?.type === 'IMG'">
                            <div class="px-2 lg:pl-0 lg:pr-4">
                                <div class="text-xs font-semibold text-quicksilver pt-3"><i class="icon-img_upload mr-1.5"></i>Photo</div>
                            </div>
                            <!--<p class="block text-xs"><i class="icon-img_upload text-base text-quicksilver"></i> Photo</p>-->
                        </ng-container>
                        <div class="flex items-center justify-center w-4 h-4 bg-[#FE4D5F] rounded-full mt-1"><span class="text-xs text-white ml-[1px]">{{user?.unseencount}}</span></div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="w-full h-[784px] bg-[#F6F7FB] shadow-[0px_0px_10px_0px_rgba(0,0,0,0.25)] rounded-md overflow-hidden">
        <div class="relative w-full flex items-center bg-white shadow-[0px_4px_4px_0px_rgba(0,0,0,0.08)] cursor-pointer py-4 px-5 z-20">
            <div class="w-[60px] h-[60px] rounded-full overflow-hidden">
                <img [src]="!!(selectedUser?.userid) && selectedUser.userid.profilepic !== '' ? constants?.baseImageURL + selectedUser.userid.profilepic : constants?.defaultImage" [alt]="selectedUser?.userid?.name" class="w-full object-cover"/>
            </div>
            <div class="ml-5">
                <strong class="block text-lg text-[#2E363F]">{{selectedUser?.userid?.name}}</strong>
                <strong class="block text-xs text-[#9BA6A8] mt-1">{{selectedUser?.userid?.email}}</strong>
            </div>
            <div class="relative group w-9 h-9 flex items-center justify-center rounded-full bg-primary/5 ml-auto ">
                <svg class="w-5" viewBox="0 0 19 5" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="16.9391" cy="2.06061" r="2.06061" transform="rotate(90 16.9391 2.06061)" fill="#FE4D5F"/> <circle cx="9.72675" cy="2.06061" r="2.06061" transform="rotate(90 9.72675 2.06061)" fill="#FE4D5F"/> <circle cx="2.51459" cy="2.06061" r="2.06061" transform="rotate(90 2.51459 2.06061)" fill="#FE4D5F"/> </svg>
                <ul class="absolute hidden group-hover:block top-full right-0 min-w-[150px] bg-white rounded-md shadow-[0px_0px_10px_0px_rgba(0,0,0,0.2)] py-2">
                    <li *ngIf="!selectedUser?.blockthisuserforchat"><a href="javascript:;" (click)="blockUser(selectedUser)"  class="block text-sm font-medium cursor-pointer py-1.5 px-3">Block</a></li>
                    <li *ngIf="selectedUser?.blockthisuserforchat"><a href="javascript:;" (click)="blockUser(selectedUser)"  class="block text-sm font-medium cursor-pointer py-1.5 px-3">UnBlock</a></li>
                    <!--<li><a href="javascript:;" (click)="clearChat(selectedUser)" class="block text-sm font-medium cursor-pointer py-1.5 px-3">Clear chat</a></li>-->
                </ul>
            </div>
        </div>
        <div #scrollMessage class="w-full h-[calc(100%-72px-92px)] overflow-y-auto p-5 pr-7">
            <div class="flex flex-col mt-8">
                <div class="max-w-2xl w-full flex justify-end ml-auto">
                    <div class="mb-5">
                        <div class="relative">
                            <div class="relative min-w-[284px] w-full flex items-center justify-between bg-white rounded-md py-3 px-6 z-10">
                                <strong class="text-sm text-[#2E363F]">I need your help</strong>
                                <span class="block">
                    <svg class="w-3.5" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M13.795 1.06441C13.5216 0.791029 13.0784 0.791029 12.805 1.06441L4.4186 9.45093L1.19499 6.22732C0.921635 5.95394 0.478447 5.95397 0.205037 6.22732C-0.0683457 6.50068 -0.0683457 6.94387 0.205037 7.21725L3.92362 10.9358C4.1969 11.2091 4.64041 11.2089 4.91358 10.9358L13.795 2.05437C14.0684 1.78101 14.0683 1.33779 13.795 1.06441Z" fill="black"/> </svg>
                  </span>
                            </div>
                            <span class="block absolute top-4 left-full -translate-x-1/2 rotate-45 w-3 h-3 bg-[#D1D1D1]"></span>
                        </div>
                        <strong class="text-[10px] text-[#9BA6A8]">2:55PM</strong>
                    </div>
                </div>
                <div class="max-w-2xl w-full flex space-x-3">
                    <div class="w-10 h-10 rounded-full overflow-hidden">
                        <img src="./assets/images/profile-2.png" alt="Elmer Laverty" class="w-full object-cover">
                    </div>
                    <div class="mb-5">
                        <div class="relative">
                            <div class="relative min-w-[284px] w-full flex items-center justify-between bg-[#FE4D5F] rounded-md py-3 px-6 z-10">
                                <strong class="text-sm text-white">Can you tell me exactly what youâ€™re looking for?</strong>
                            </div>
                            <span class="block absolute top-4 right-full translate-x-1/2 rotate-45 w-3 h-3 bg-[#FE4D5F]"></span>
                        </div>
                        <strong class="text-[10px] text-[#9BA6A8]">2:55PM</strong>
                    </div>
                </div>
                <div class="max-w-2xl w-full flex space-x-3">
                    <div class="w-10 h-10 rounded-full overflow-hidden">
                        <img src="./assets/images/profile-2.png" alt="Elmer Laverty" class="w-full object-cover">
                    </div>
                    <div class="w-[calc(100%-40px)] mb-5">
                        <div class="relative">
                            <div class="relative min-w-[284px] w-full flex items-center justify-between bg-[#FE4D5F] rounded-md py-3 px-6 z-10">
                                <strong class="text-sm text-white">Pain was born and I will give you a complete account of the system, and expound the actual teachings of the great explorer of the truth,<br><br>1.praesentium voluptatum<br>2.deleniti atque corrupti quos dolores</strong>
                            </div>
                            <span class="block absolute top-4 right-full translate-x-1/2 rotate-45 w-3 h-3 bg-[#FE4D5F]"></span>
                        </div>
                        <strong class="text-[10px] text-[#9BA6A8]">2:55PM</strong>
                    </div>
                </div>
            </div>
            <div class="w-full flex items-center">
                <span class="block w-[calc(50%-33px)] h-0.5 bg-[#C4C4C4]"></span>
                <span class="block text-[10px] text-[#9BA6A8] px-5">Today</span>
                <span class="block w-[calc(50%-33px)] h-0.5 bg-[#C4C4C4]"></span>
            </div>
            <div class="flex flex-col mt-8">
                <div class="max-w-2xl w-full flex justify-end ml-auto">
                    <div class="mb-5">
                        <div class="relative">
                            <div class="relative min-w-[284px] w-full flex items-end justify-between bg-white rounded-md py-3 px-6 z-10">
                                <strong class="text-sm text-[#2E363F]">Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium,<br><br>totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto <br><br>enouncing pleasure and praising
                                </strong>
                                <span class="block">
                    <svg class="w-3.5" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M13.795 1.06441C13.5216 0.791029 13.0784 0.791029 12.805 1.06441L4.4186 9.45093L1.19499 6.22732C0.921635 5.95394 0.478447 5.95397 0.205037 6.22732C-0.0683457 6.50068 -0.0683457 6.94387 0.205037 7.21725L3.92362 10.9358C4.1969 11.2091 4.64041 11.2089 4.91358 10.9358L13.795 2.05437C14.0684 1.78101 14.0683 1.33779 13.795 1.06441Z" fill="black"/> </svg>
                  </span>
                            </div>
                            <span class="block absolute top-4 left-full -translate-x-1/2 rotate-45 w-3 h-3 bg-[#D1D1D1]"></span>
                        </div>
                        <strong class="text-[10px] text-[#9BA6A8]">2:55PM</strong>
                    </div>
                </div>
                <div class="max-w-2xl w-full flex space-x-3">
                    <div class="w-10 h-10 rounded-full overflow-hidden">
                        <img src="./assets/images/profile-2.png" alt="Elmer Laverty" class="w-full object-cover">
                    </div>
                    <div class="mb-5">
                        <div class="relative">
                            <div class="relative min-w-[284px] w-full flex items-center justify-between bg-[#FE4D5F] rounded-md py-3 px-6 z-10">
                                <strong class="text-sm text-white">Can you tell me exactly what youâ€™re looking for?</strong>
                            </div>
                            <span class="block absolute top-4 right-full translate-x-1/2 rotate-45 w-3 h-3 bg-[#FE4D5F]"></span>
                        </div>
                        <strong class="text-[10px] text-[#9BA6A8]">2:55PM</strong>
                    </div>
                </div>
                <div class="max-w-2xl w-full flex space-x-3">
                    <div class="w-10 h-10 rounded-full overflow-hidden">
                        <img src="./assets/images/profile-2.png" alt="Elmer Laverty" class="w-full object-cover">
                    </div>
                    <div class="w-[calc(100%-40px)] mb-5">
                        <div class="relative">
                            <div class="relative min-w-[284px] w-full flex items-center justify-between bg-[#FE4D5F] rounded-md py-3 px-6 z-10">
                                <strong class="text-sm text-white">Pain was born and I will give you a complete account of the system, and expound the actual teachings of the great explorer of the truth,<br><br>1.praesentium voluptatum<br>2.deleniti atque corrupti quos dolores</strong>
                            </div>
                            <span class="block absolute top-4 right-full translate-x-1/2 rotate-45 w-3 h-3 bg-[#FE4D5F]"></span>
                        </div>
                        <strong class="text-[10px] text-[#9BA6A8]">2:55PM</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="relative w-full flex items-center bg-white shadow-[0px_-3px_4px_0px_rgba(0,0,0,0.08)] p-5 z-20">
            <span class="block" (click)="toggleEmojiPicker()">
              <svg class="w-8" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"> <g opacity="0.7" clip-path="url(#clip0_10330_12299)"> <path d="M16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32Z" fill="#FFD93B"/> <path d="M16.0001 26.2841C11.3211 26.2841 7.24406 23.1151 6.08606 18.5791C5.99506 18.2221 6.21006 17.8591 6.56706 17.7681C6.92206 17.6751 7.28606 17.8921 7.37706 18.2491C8.38506 22.1951 11.9301 24.9511 15.9991 24.9511C20.0681 24.9511 23.6141 22.1951 24.6211 18.2491C24.7111 17.8921 25.0741 17.6751 25.4321 17.7681C25.7891 17.8591 26.0041 18.2221 25.9131 18.5791C24.7561 23.1151 20.6791 26.2841 16.0001 26.2841Z" fill="#3E4347"/> <path d="M31.9999 15.9999C31.9999 24.8399 24.8349 31.9999 15.9999 31.9999C10.9699 31.9999 6.47992 29.6799 3.54492 26.0449C6.28992 28.2649 9.78492 29.5899 13.5899 29.5899C22.4249 29.5899 29.5899 22.4299 29.5899 13.5899C29.5899 9.78492 28.2649 6.28992 26.0449 3.54492C29.6749 6.47992 31.9999 10.9699 31.9999 15.9999Z" fill="#F4C534"/> <path d="M10.8333 16.683C12.1876 16.683 13.2853 15.3783 13.2853 13.769C13.2853 12.1596 12.1876 10.855 10.8333 10.855C9.47915 10.855 8.38135 12.1596 8.38135 13.769C8.38135 15.3783 9.47915 16.683 10.8333 16.683Z" fill="#3E4347"/> <path d="M11.9394 13.142C11.7484 13.292 11.4344 13.218 11.2334 12.974C11.0324 12.73 11.0224 12.403 11.2134 12.253C11.4034 12.096 11.7184 12.17 11.9184 12.414C12.1204 12.665 12.1224 12.986 11.9394 13.142Z" fill="#5A5F63"/> <path d="M21.1698 16.683C22.524 16.683 23.6218 15.3783 23.6218 13.769C23.6218 12.1596 22.524 10.855 21.1698 10.855C19.8156 10.855 18.7178 12.1596 18.7178 13.769C18.7178 15.3783 19.8156 16.683 21.1698 16.683Z" fill="#3E4347"/> </g> <defs> <clipPath id="clip0_10330_12299"> <rect width="32" height="32" fill="white"/> </clipPath> </defs> </svg>
            </span>
            <div class="w-[calc(100%-56px)]">
                <form class="w-full px-4">
                    <input type="text" class="w-full text-sm font-medium outline-none" placeholder="Type here...">
                </form>
            </div>
            <span class="block">
                <svg class="w-6" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg"> <g clip-path="url(#clip0_10330_12295)"> <path d="M22.5236 10.7532L1.16695 0.896326C0.826887 0.741901 0.421112 0.833899 0.184546 1.12632C-0.0536625 1.41874 -0.0618765 1.83437 0.164832 2.13501L7.18787 11.4991L0.164832 20.8631C-0.0618765 21.1638 -0.0536625 21.581 0.182903 21.8718C0.342256 22.0706 0.580465 22.1774 0.821959 22.1774C0.938599 22.1774 1.05524 22.1527 1.16531 22.1018L22.5219 12.2449C22.8144 12.1102 23 11.8194 23 11.4991C23 11.1787 22.8143 10.8879 22.5236 10.7532Z" fill="#FE4D5F"/> </g> <defs> <clipPath id="clip0_10330_12295"> <rect width="23" height="23" fill="white"/> </clipPath> </defs> </svg>
            </span>
            <emoji-mart class="emoji-mart absolute bottom-full left-0" *ngIf="showEmojiPicker" (emojiSelect)="addEmoji($event)" title="Pick your emojiâ€¦"></emoji-mart>
        </div>
    </div>
</div>