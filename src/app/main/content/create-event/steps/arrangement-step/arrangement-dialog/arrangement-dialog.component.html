<p-progressSpinner *ngIf="isLoading" [style]="{width: '50px', height: '50px'}" animationDuration=".5s" strokeWidth="8" class="fixed bg-white bg-opacity-25 backdrop-blur-sm right-0 bottom-0 h-[calc(100vh-76px)] w-full lg:w-[calc(100vw-230px)] z-30" styleClass="custom-spinner absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"></p-progressSpinner>
<div class="popup table fixed w-full inset-0 z-40 bg-black bg-opacity-75 h-screen">
  <div class="table-cell align-middle">
    <div class="popin w-full mx-auto max-h-[calc(100vh-55px)] overflow-y-auto px-5 lg:px-9">
      <div class="bg-brightGray p-4 xl:p-6 space-y-7">
        <div class="flex justify-between items-center">
          <h2>Add {{!selectedTab ? 'Items' : ((selectedTab == 2) ? 'Equipments' : 'Food Type')}}</h2>
          <a (click)="closePopup()" href="javascript:void(0);">
            <svg fill="none" height="21" viewBox="0 0 21 21" width="21" xmlns="http://www.w3.org/2000/svg"><path d="M20.2902 4.13628L13.9273 10.4999L20.2902 16.8631C21.2366 17.8099 21.2366 19.3437 20.2902 20.2905C19.8173 20.7634 19.1973 21 18.5776 21C17.9569 21 17.3368 20.7637 16.8643 20.2905L10.5 13.9265L4.13625 20.2904C3.66342 20.7633 3.04337 20.9999 2.42313 20.9999C1.80308 20.9999 1.18345 20.7637 0.710197 20.2904C-0.23625 19.344 -0.23625 17.8103 0.710197 16.8631L7.07289 10.4998L0.709835 4.13628C-0.236612 3.18982 -0.236612 1.65575 0.709835 0.709297C1.6561 -0.236432 3.18926 -0.236432 4.13589 0.709297L10.5 7.07288L16.8636 0.709297C17.8104 -0.236432 19.3437 -0.236432 20.2898 0.709297C21.2366 1.65575 21.2366 3.18982 20.2902 4.13628Z" fill="#2E363F"/></svg>
          </a>
        </div>
        <form [formGroup]="seatingForm" class="">
          <div class="w-3/5 overflow-auto capitalize pb-8 xl:pb-10 mx-auto">
            <ul class="flex justify-between step-progress-holder z-10 relative">
              <li class="active">
                <div><span>01</span></div>
                <h3>Select item</h3>
              </li>
              <li [ngClass]="{'active': selectedTab >= 1}">
                <div><span>02</span></div>
                <h3>Select Food</h3>
              </li>
              <li [ngClass]="{'active': selectedTab >= 2}">
                <div><span>03</span></div>
                <h3>Equipment</h3>
              </li>
            </ul>
          </div>

          
          <div class="overflow-x-auto max-w-[calc(100vw-128px)]">
            <div *ngIf="!selectedTab" class="space-y-4 px-2" id="stap-one">
              <div class="space-y-7">
                <div class="w-full relative">
                  <label class="input-titel">Select item</label>
                  <select (change)="onSeatingItemChange()" [formControlName]="'seating_item'" class="bg-white rounded-md flex space-x-3 outline-0 px-4 py-3 relative arrow w-full" name="seating_item" (click)="prepareSeatingItems()">
                    <option [value]=""></option>
                    <option *ngFor="let seatingItem of seatingItems" [value]="seatingItem._id">{{seatingItem.itemname}}</option>
                  </select>
                  <span class="absolute top-full text-red-500 text-10" *ngIf="seatingForm.get('seating_item')?.invalid && (seatingForm.get('seating_item')?.dirty && seatingForm.get('seating_item')?.touched)">
                    <span *ngIf="seatingForm.get('seating_item')?.errors?.['required']">
                      Please select item.
                    </span>
                  </span>
                </div>
                <div *ngIf="seatingForm?.value?.seating_item || editArrangementObj?.seating_item" class="">
                  <div class="flex items-center justify-between pb-2">
                    <label class="input-titel">Arrangement</label>
                    <button (click)="addArrangements()" class="text-xs text-white font-bold px-3 rounded py-1 whitespace-nowrap bg-magicPotion flex items-center">
                      <i class="icon-plus_round leading-0 mr-2"></i> Add siting arrangement
                    </button>
                  </div>
                  <div class="w-full">
                    <div class="bg-white p-7 rounded-md">
                      <div class="overflow-auto max-h-[430px]">
                        <div formArrayName="arrangements">
                          <div *ngFor="let child of arrangements.controls; let i = index" class="pluseBox">
                            <ul [formGroupName]="i" class="flex items-center space-x-2 py-2">
                              <li class="pb-3">
                                <div class="w-[140px]">
                                  <span class="input-titel text-xs">
                                    No of {{selectedSeatingObj.itemname}}
                                  </span>
                                  <div class="w-full flex items-center space-x-5">
                                    <div class="w-full inputHolder relative">
                                      <input (input)="updateCalculatedValue()" [formControlName]="'number_of_seating_item'" [min]="0" placeholder="0" [name]="'number_of_seating_item' + i" class="bgquicksilver" fuseValidNumber type="number">
                                      <span class="absolute top-full text-red-500 text-10" *ngIf="child?.get('number_of_seating_item')?.invalid && (child?.get('number_of_seating_item')?.dirty && child?.get('number_of_seating_item')?.touched)">
                                        <span *ngIf="child?.get('number_of_seating_item')?.errors?.['required']">
                                          This field must have required.
                                        </span>
                                        <span *ngIf="child?.get('number_of_seating_item')?.errors?.['min']">
                                          Please enter valid value.
                                        </span>
                                      </span>
                                    </div>
                                  </div>
                                </div>
                              </li>
                              <li class="pb-3">
                                <div class="w-[130px] inputHolder">
                                  <span class="input-titel text-xs">Vertical Location</span>
                                  <select (input)="updateCalculatedValue()" [formControlName]="'vertical_location'" [name]="'vertical_location' + i" class="arrow bgquicksilver py-3 text-japaneseIndigo font-bold rounded-md tracking-wider appearance-none focus-visible:outline-none">
                                    <option *ngFor="let location of constants.verticalLocationsArr" [value]="location.value">{{location.label}}</option>
                                  </select>
                                </div>
                              </li>
                              <li class="pb-3">
                                <div class="w-[120px] inputHolder">
                                  <span class="input-titel text-xs">Horizontal Location</span>
                                  <select (input)="updateCalculatedValue()" [formControlName]="'horizontal_location'" [name]="'horizontal_location' + i" class="arrow bgquicksilver py-3 text-japaneseIndigo font-bold rounded-md tracking-wider appearance-none focus-visible:outline-none">
                                    <option *ngFor="let location of constants.horizontalLocationsArr" [value]="location.value">{{location.label}}</option>
                                  </select>
                                </div>
                              </li>

                              <li class="pb-3">
                                <div class="w-[165px] inputHolder">
                                  <span class="input-titel text-xs">Seat Type</span>
                                  <select (input)="updateCalculatedValue()" [formControlName]="'seat_type'" [name]="'seat_type' + i" class="arrow bgquicksilver py-3 text-japaneseIndigo font-bold rounded-md tracking-wider appearance-none focus-visible:outline-none">
                                    <option *ngFor="let seat of constants.seatArr" [value]="seat.value">{{seat.label}}</option>
                                  </select>        
                                  <!-- <input [formControlName]="'seat_type'" placeholder="Seat Type" [name]="'seat_type' + i" class="bgquicksilver" type="text"> -->
                                </div>
                              </li>

                              <li class="pb-3" *ngIf="(!selectedSeatingObj.isonlyperperson)">
                                <div class="w-[151px]">
                                  <span class="input-titel text-xs">Per {{selectedSeatingObj.itemname}} Person Capacity</span>
                                  <div class="w-full flex items-center space-x-5">
                                    <div class="w-full inputHolder relative">
                                      <input (input)="updateCalculatedValue()" [formControlName]="'per_seating_person'" [min]="0" placeholder="0" [name]="'per_seating_person' + i" class="bgquicksilver" fuseValidNumber type="number">
                                      <span class="absolute top-full text-red-500 text-10" *ngIf="child?.get('per_seating_person')?.invalid && (child?.get('per_seating_person')?.dirty && child?.get('per_seating_person')?.touched)">
                                        <span *ngIf="child?.get('per_seating_person')?.errors?.['required']">
                                          This field must have required.
                                        </span>
                                        <span *ngIf="child?.get('per_seating_person')?.errors?.['min']">
                                          Please enter valid value.
                                        </span>
                                      </span>
                                    </div>
                                  </div>
                                </div>
                              </li>
                              <li class="pb-3">
                                <div class="w-[145px]">
                                  <span class="input-titel text-xs">Total Person Capacity</span>
                                  <div class="w-full flex items-center space-x-5">
                                    <div class="w-full inputHolder relative">
                                      <input (input)="updateCalculatedValue()" [formControlName]="'total_person'" [min]="0" placeholder="0" [name]="'total_person' + i" class="bgquicksilver" fuseValidNumber type="number">
                                      <span class="absolute top-full text-red-500 text-10" *ngIf="child?.get('total_person')?.invalid && (child?.get('total_person')?.dirty && child?.get('total_person')?.touched)">
                                        <span *ngIf="child?.get('total_person')?.errors?.['required']">
                                          This field must have required.
                                        </span>
                                        <span *ngIf="child?.get('total_person')?.errors?.['min']">
                                          Please enter valid value.
                                        </span>
                                      </span>
                                    </div>
                                  </div>
                                </div>
                              </li>
                              <li class="pb-3" *ngIf="(!selectedSeatingObj.isonlyperperson)">
                                <div class="w-[151px]">
                                  <span class="input-titel text-xs">
                                    Per {{selectedSeatingObj.itemname}} Price
                                  </span>
                                  <div class="w-full flex items-center space-x-5">
                                    <div class="w-full inputHolder relative">
                                      <input (input)="updateCalculatedValue()" [formControlName]="'per_seating_price'" [min]="0" placeholder="0" [name]="'per_seating_price' + i" class="bgquicksilver" fuseValidNumber type="number">
                                      <span class="absolute top-full text-red-500 text-10" *ngIf="child?.get('per_seating_price')?.invalid && (child?.get('per_seating_price')?.dirty && child?.get('per_seating_price')?.touched)">
                                        <span *ngIf="child?.get('per_seating_price')?.errors?.['required']">
                                          This field must have required.
                                        </span>
                                        <span *ngIf="child?.get('per_seating_price')?.errors?.['min']">
                                          Please enter valid value.
                                        </span>
                                      </span>
                                    </div>
                                  </div>
                                </div>
                              </li>
                              <li class="pb-3">
                                <div class="w-[145px]">
                                  <span class="input-titel text-xs">Per Person Price</span>
                                  <div class="w-full flex items-center space-x-5">
                                    <div class="w-full inputHolder relative">
                                      <input (input)="updateCalculatedValue()" [formControlName]="'per_person_price'" [min]="0" placeholder="0" [name]="'per_person_price' + i" class="bgquicksilver" fuseValidNumber type="number">                                      
                                      <span class="absolute top-full text-red-500 text-10" *ngIf="child?.get('per_person_price')?.invalid && (child?.get('per_person_price')?.dirty && child?.get('per_person_price')?.touched)">
                                        <span *ngIf="child?.get('per_person_price')?.errors?.['required']">
                                          This field must have required.
                                        </span>
                                        <span *ngIf="child?.get('per_person_price')?.errors?.['min']">
                                          Please enter valid value.
                                        </span>
                                      </span>
                                    </div>
                                  </div>
                                </div>
                              </li>
                              <li class="pb-3">
                                <div class="w-[151px]">
                                  <span class="input-titel text-xs">Total Amount</span>
                                  <div class="w-full flex items-center space-x-5">
                                    <div class="w-full inputHolder relative">
                                      <input (input)="updateCalculatedValue()" [formControlName]="'total_amount'" [min]="0" placeholder="0" [name]="'total_amount' + i" class="bgquicksilver" fuseValidNumber type="number">                                      
                                      <span class="absolute top-full text-red-500 text-10" *ngIf="child?.get('total_amount')?.invalid && (child?.get('total_amount')?.dirty && child?.get('total_amount')?.touched)">
                                        <span *ngIf="child?.get('total_amount')?.errors?.['required']">
                                          This field must have required.
                                        </span>
                                        <span *ngIf="child?.get('total_amount')?.errors?.['min']">
                                          Please enter valid value.
                                        </span>
                                      </span>
                                    </div>
                                  </div>
                                </div>
                              </li>
                              <li class="pb-3">
                                <div class="w-[151px]">
                                  <span class="input-titel text-xs">Description</span>
                                  <div class="w-full flex items-center space-x-5">
                                    <div class="w-full inputHolder">
                                      <input [formControlName]="'description'" [name]="'description' + i" class="bgquicksilver" type="text">
                                    </div>
                                  </div>
                                </div>
                              </li>
                              <li class="pb-3">
                                <div class="w-full 2xl:w-1/6 2xl:pl-5">
                                  <span *ngIf="(!selectedSeatingObj.isonlyperperson)" class="input-titel text-xs whitespace-nowrap">Booking Acceptance</span>
                                  <div class="flex 2xl:justify-between items-center">
                                    <div *ngIf="(!selectedSeatingObj.isonlyperperson)" class="flex items-center pr-5 border-r-2 mr-5 py-4">
                                      <input [formControlName]="'booking_acceptance'" [name]="'booking_acceptance' + i" class="switch mx-3 order-2" id="on" type="checkbox">
                                      <span class="off text-xs font-bold anim whitespace-nowrap order-1 text-caribbeanGreen">Per {{selectedSeatingObj.itemname}}</span>
                                      <span class="on text-xs font-bold anim whitespace-nowrap order-3">Per Person</span>
                                    </div>
                                    <div class="addDeleteBtn" [ngClass]="{'pt-5' : (selectedSeatingObj.isonlyperperson)}">
                                      <button (click)="removeArrangement(i)" class="minus border-2 border-magicPotion w-7 h-7 rounded-full flex justify-center items-center">
                                        <span class="border border-magicPotion flex border-x-8 border-y-5 bg-magicPotion rounded"></span>
                                      </button>
                                      <!-- <button type="reset" *ngIf="i == 0" class="minus border-2 border-magicPotion w-7 h-7 rounded-full flex justify-center items-center">
                                        <span class="border border-magicPotion flex border-x-8 border-y-5 bg-magicPotion rounded"></span>
                                      </button> -->
                                    </div>
                                  </div>
                                </div>
                              </li>
                            </ul>
                          </div>
                          <hr class="block sticky left-0 right-0 bottom-20 mb-2 xl:border-t-2 z-10">
                          <span class="block sticky w-full h-20 bottom-0 left-0 right-0 -mb-16 bg-white"></span>
                          <div class="sticky bottom-0 bg-white">
                            <ul class="">
                              <li class="input-titel text-xs text-japaneseIndigo">All Total</li>
                              <li>
                                <ul class="flex items-center space-x-2">
                                  <li>
                                    <div class="inputHolder w-[140px]">
                                      <span class="bgmagicpotion text-magicPotion">
                                        {{totalArrangementsObj?.total_number_of_seating_items || 0}}
                                      </span>
                                    </div>
                                  </li>
                                  <li>
                                    <div class="inputHolder w-[130px]">
                                      <span class="bgmagicpotion text-magicPotion">-</span>
                                    </div>
                                  </li>
                                  <li>
                                    <div class="inputHolder w-[120px]">
                                      <span class="bgmagicpotion text-magicPotion">-</span>
                                    </div>
                                  </li>
                                  <li>
                                    <div class="inputHolder w-[165px]">
                                      <span class="bgmagicpotion text-magicPotion">-</span>
                                    </div>
                                  </li>
                                  <li *ngIf="(!selectedSeatingObj.isonlyperperson)">
                                    <div class="inputHolder w-[151px]">
                                      <span class="bgmagicpotion text-magicPotion">
                                        {{totalArrangementsObj?.total_per_seating_persons || 0}}
                                      </span>
                                    </div>
                                  </li>
                                  <li>
                                    <div class="inputHolder w-[140px]">
                                      <span class="bgmagicpotion text-magicPotion">
                                        {{totalArrangementsObj?.total_persons || 0}}
                                      </span>
                                    </div>
                                  </li>
                                  <li *ngIf="(!selectedSeatingObj.isonlyperperson)">
                                    <div class="inputHolder w-[151px]">
                                      <span class="bgmagicpotion text-magicPotion">
                                        {{totalArrangementsObj?.per_seating_price || 0 | number:'1.2-2'}}
                                      </span>
                                    </div>
                                  </li>
                                  <li>
                                    <div class="inputHolder w-[151px]">
                                      <span class="bgmagicpotion text-magicPotion">
                                        {{totalArrangementsObj.per_person_price || 0 | number:'1.2-2'}}
                                      </span>
                                    </div>
                                  </li>
                                  <li>
                                    <div class="inputHolder w-[151px]">
                                      <span class="bgmagicpotion text-magicPotion">
                                        {{totalArrangementsObj?.total_amount || 0 | number:'1.2-2'}}
                                      </span>
                                    </div>
                                  </li>
                                  <li>
                                    <div class="inputHolder w-[151px]">
                                      <span class="bgmagicpotion text-magicPotion">-</span>
                                    </div>
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="prw-next-btn justify-end">
                <!--<button class="flex items-center" disabled type="button">
                  <i class="icon-left_arrow mr-3"></i>
                  <h5>Back</h5>
                </button>-->
                <!-- [disabled]="!selectedSeatingObj || !selectedSeatingObj._id" -->
                <button (click)="selectItems()" class="flex items-center active" type="button">
                  <h5>Next</h5>
                  <i class="icon-right_arrow ml-3"></i>
                </button>
              </div>
            </div>

            <div *ngIf="selectedTab == 1" class="space-y-8 px-2" id="step-two">
              <div class="space-y-8 xl:space-y-10">
                <div>
                  <span class="input-titel">Select Food</span>
                  <div class="flex flex-wrap -mx-2">
                    <div class="w-1/2 px-2 pt-2 xl:pt-0" (click)="btnclick(1)">
                      <label class="bg-white py-4 px-5 h-full flex items-center rounded-md cursor-pointer"
                             for="include-food">
                        <div class="pr-3">
                          <input checked="" class="w-6 h-6 rounded-full bg-brightGray appearance-none hidden"
                                 id="include-food" name="food_included_in_ticket_price" type="radio" [value]="true" [formControlName]="'food_included_in_ticket_price'">
                          <div
                              class="w-6 h-6 flex items-center justify-center rounded-full bg-brightGray overflow-hidden check-language">
                            <i class="icon-right text-white text-[10px] scale-0 origin-center duration-300 transition-all"></i>
                          </div>
                        </div>
                        <div class="w-full flex items-center justify-between">
                          <span class="text-base font-bold text-black">Included Food in Ticket Price</span>
                          <img alt="contruction" src="../../assets/images/contruction1.png">
                        </div>
                      </label>
                    </div>
                    <div class="w-1/2 px-2 pt-2 xl:pt-0" (click)="btnclick(2)">
                      <label class="bg-white py-4 px-5 h-full flex items-center rounded-md cursor-pointer"
                             for="notinclude=food">
                        <div class="pr-3">
                          <input class="w-6 h-6 rounded-full bg-brightGray appearance-none hidden" id="notinclude=food"
                                 name="food_included_in_ticket_price" type="radio" [value]="false" [formControlName]="'food_included_in_ticket_price'">
                          <div
                              class="w-6 h-6 flex items-center justify-center rounded-full bg-brightGray overflow-hidden check-language">
                            <i class="icon-right text-white text-[10px] scale-0 origin-center duration-300 transition-all"></i>
                          </div>
                        </div>
                        <div><span class="text-base font-bold text-black">Not Included Food in Ticket Price</span></div>
                      </label>
                    </div>
                  </div>
                </div>
              </div>  
            </div> 
            <div *ngIf="selectedTab == 1" class="space-y-8 px-2" id="stap-two">
              <div class="space-y-8">
                <div>
                  <span class="input-titel">Select Food</span>
                  <div class="flex flex-wrap -mx-2">
                    <div class="w-1/2 xl:w-1/4 px-2 pt-2 xl:pt-0">
                      <label class="bg-white h-full py-4 px-5 flex items-center rounded-md cursor-pointer" for="veg">
                        <div class="pr-3">
                          <input checked="" class="w-6 h-6 rounded-full bg-brightGray appearance-none hidden" id="veg" name="food" type="radio" [value]="'VEG'" [formControlName]="'food'">
                          <div class="w-6 h-6 flex items-center justify-center rounded-full bg-brightGray overflow-hidden check-language">
                            <i class="icon-right text-white text-[10px] scale-0 origin-center duration-300 transition-all"></i>
                          </div>
                        </div>
                        <div class="w-full flex items-center justify-between"><span class="text-base font-bold text-black">Veg</span>
                          <img alt="veg" src="../../assets/images/veg.png">
                        </div>
                      </label>
                    </div>
                    <div class="w-1/2 xl:w-1/4 px-2 pt-2 xl:pt-0">
                      <label class="bg-white h-full py-4 px-5 flex items-center rounded-md cursor-pointer" for="nonveg">
                        <div class="pr-3">
                          <input class="w-6 h-6 rounded-full bg-brightGray appearance-none hidden" id="nonveg"
                                 name="food" type="radio" [value]="'NONVEG'" [formControlName]="'food'">
                          <div
                              class="w-6 h-6 flex items-center justify-center rounded-full bg-brightGray overflow-hidden check-language">
                            <i class="icon-right text-white text-[10px] scale-0 origin-center duration-300 transition-all"></i>
                          </div>
                        </div>
                        <div class="w-full flex items-center justify-between">
                          <span class="text-base font-bold text-black">Non Veg</span>
                          <img alt="veg" src="../../assets/images/chicken-leg1.png">
                        </div>
                      </label>
                    </div>
                    <div class="w-1/2 xl:w-1/4 px-2 pt-2 xl:pt-0">
                      <label class="bg-white h-full py-4 px-5 flex items-center rounded-md cursor-pointer" for="both">
                        <div class="pr-3">
                          <input class="w-6 h-6 rounded-full bg-brightGray appearance-none hidden" id="both" name="food" type="radio" [value]="'BOTH'" [formControlName]="'food'">
                          <div class="w-6 h-6 flex items-center justify-center rounded-full bg-brightGray overflow-hidden check-language">
                            <i class="icon-right text-white text-[10px] scale-0 origin-center duration-300 transition-all"></i>
                          </div>
                        </div>
                        <div class="w-full flex items-center justify-between">
                          <span class="text-base font-bold text-black">Both</span>
                          <div class="flex items-center space-x-4">
                            <img alt="chicken-leg1" src="../../assets/images/chicken-leg1.png">
                            <img alt="veg" src="../../assets/images/veg.png">
                          </div>
                        </div>
                      </label>
                    </div>
                    <div *ngIf="tempFoodSec" class="w-1/2 xl:w-1/4 px-2 pt-2 xl:pt-0">
                      <label class="bg-white h-full py-4 px-5 flex items-center rounded-md cursor-pointer" for="foodnotinclude">
                        <div class="pr-3">
                          <input class="w-6 h-6 rounded-full bg-brightGray appearance-none hidden" id="foodnotinclude" name="food" type="radio" [value]="'NONE'" [formControlName]="'food'">
                          <div class="w-6 h-6 flex items-center justify-center rounded-full bg-brightGray overflow-hidden check-language">
                            <i class="icon-right text-white text-[10px] scale-0 origin-center duration-300 transition-all"></i>
                          </div>
                        </div>
                        <div><span class="text-base font-bold text-black">Food not included</span></div>
                      </label>
                    </div>
                  </div>
                </div>
                <div *ngIf="selectedTab == 1 && !isAddPhotos" class="media-upload-holder pt-5" id="stap-two">
                  <div class="flex items-center justify-between">
                    <span class="text-sm text-quicksilver font-semibold">Add Photos <span class="font-normal">(15 Images - up to 5MB/Image & Resolution up to 1080PX x 1080PX)</span></span>
                    <a class="text-spiroDiscoBall text-sm font-bold opacity-60 hover:text-red-500" href="javascript:void(0);" (click)="openImageAndVideoDialog(tempImgArr, true, false)">View All</a>
                  </div>
                  <div class="flex flex-wrap h-full pt-2">
                    <div *ngFor="let photo of tempImgArr; let i = index" class="upload-box mr-2.5 mb-2.5">
                      <div class="rounded relative overflow-hidden h-full w-full group">
                        <img [alt]="'add-photo-' + i" [src]="!!(photo?.url) ? constants.baseImageURL + photo.url : constants.defaultImage" *ngIf="photo.url" class="object-cover w-full h-full"/>
                        <div class="opacity-0 bg-black bg-opacity-50 flex items-center justify-center group-hover:opacity-100 absolute inset-0 transition-all duration-300">
                          <button class="edit" (click)="editImageUpload( 'food', photo, i)">Edit</button>
                          <span class="block" (click)="openImageAndVideoDialog([photo], true, false)"><i class="pi pi-eye text-2xl text-white cursor-pointer" ></i></span>
                          <button (click)="removeImage('food', i)" class="remove">Remove</button>
                        </div>
                      </div>
                      <div class="absolute inset-0 flex items-center justify-center bg-black/70 cursor-pointer z-10" *ngIf="openImages" (click)="openImages = !openImages">
                        <div class="max-w-xs">
                          <img [alt]="'add-photo-' + i" [src]="!!(viewImagesDailog) ? constants.baseImageURL + viewImagesDailog  : constants.defaultImage" *ngIf="photo.url" class="object-cover w-full h-full"/>                        
                        </div>
                        <i class="pi pi-times ng-tns-c140-7 absolute top-10 right-10 text-white font-semibold text-xl"></i>
                      </div>
                    </div>
                    <div (click)="openUploadPhotoDialog()" class="upload-holder" *ngIf="tempImgArr.length < 15">
                      <label class="upload-photo" for="event-upload1">
                        <!-- <input type="file" id="photo" name="photo" (change)="onFileChange($event, 'photo')" id="event-upload1" class="appearance-none hidden" accept="image/png, image/jpeg, image/gif" /> -->
                        <i class="icon-img_upload text-base text-quicksilver"></i>
                        <div class="mt-1 flex items-baseline justify-center"><span class="input-titel pt-1">Add Photos</span></div>
                      </label>
                    </div>
                  </div>
                </div>  
                <div class="w-full">
                  <span class="input-titel">Food Description <i class="text-xs font-medium" [ngClass]="{'text-magicPotion' : textEditorFood}">( {{textEditorLimitFood}} characters out of {{textEditorMaxLimit}} )</i></span>
                  <div class="w-full bg-white rounded">
                    <ckeditor (ready)="onTextEditorReady($event, 'food_description')" (keyup)="editorCharacterSetFood()" (keydown)="editorCharacterSetFood()" [config]="editorConfig" [editor]="detailEditor" [formControlName]="'food_description'" class="h-44 text-editor" id="food_description" name="food_description"></ckeditor>
                  </div>
                  <!-- <textarea class="outline-none flex items-center w-full bg-white p-2 px-3.5 rounded-tl-md rounded-tr-md placeholder:text-sm placeholder:text-[#a6a6a6] placeholder:font-bold" cols="30" rows="4" [formControlName]="'food_description'"></textarea> -->
                  <div class="flex items-center space-x-3 bg-white justify-end pr-4 pb-2 rounded-bl-md rounded-br-md">
                    <a href="javascript:void(0);">
                      <svg fill="none" height="13" viewBox="0 0 20 13" width="20" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M17.9986 0H2.00141C0.895243 0 0.00937427 0.831269 0.00937427 1.85839L0 11.1416C0 12.1687 0.895243 13 2.00141 13H17.9986C19.1048 13 20 12.1687 20 11.1416V1.85839C20 0.831269 19.1048 0 17.9986 0ZM9.92735 3.10311H11.0148L11.8725 4.50452C12.1162 4.90927 12.36 5.38366 12.5428 5.81453H12.5615C12.5006 5.30968 12.4818 4.79176 12.4818 4.22163V3.10311H13.3396V6.92869H12.36L11.4835 5.4533C11.2397 5.04419 10.9679 4.55239 10.7663 4.10412L10.7476 4.10847C10.771 4.61332 10.7851 5.153 10.7851 5.77536V6.92869H9.92735V3.10311ZM6.6651 3.10311H9.21022V3.81252H7.60253V4.60897H9.11648V5.30967H7.60253V6.21928H9.29459V6.92869H6.6651V3.10311ZM5.00117 7.42919H2.99977V5.57081H5.00117V7.42919ZM5.00117 4.64379H2.99977V2.7854H5.00117V4.64379ZM14.0005 11.1416H5.99953V9.28323H14.0005V11.1416ZM17.0002 7.42919H14.9988V5.57081H17.0002V7.42919ZM17.0002 4.64379H14.9988V2.7854H17.0002V4.64379Z"
                            fill="#A6A6A6"/>
                      </svg>
                    </a>
                    <a href="javascript:void(0);">
                      <svg fill="none" height="15" viewBox="0 0 18 15" width="18" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M8.91794 6.10077C10.7305 6.10077 11.8906 4.86822 11.8906 3.05563C11.8906 2.83812 11.8906 2.69311 11.8181 2.54811H8.84544V3.63566H10.5855C10.513 4.07068 10.078 5.01322 8.84544 5.01322C7.75788 5.01322 6.88784 4.14318 6.88784 3.05563C6.88784 1.96808 7.75788 1.09804 8.84544 1.09804C9.42546 1.09804 9.86048 1.38805 10.078 1.60556L10.948 0.808024C10.368 0.3005 9.71548 0.0104864 8.84544 0.0104864C7.25036 -0.13452 5.80029 1.24304 5.80029 2.98313C5.80029 4.6507 7.25036 6.10077 8.91794 6.10077Z"
                            fill="#A6A6A6"/>
                        <path
                            d="M15.7332 5.08667H11.8181C11.238 5.95671 10.223 6.53674 8.91792 6.53674C7.75786 6.53674 6.67031 5.95671 6.01778 5.08667H2.0301C0.942544 5.08667 0 6.02921 0 7.18927V12.627C0 13.7146 0.942544 14.6571 2.0301 14.6571H15.6607C16.8208 14.6571 17.6908 13.7146 17.6908 12.627V7.18927C17.7633 6.02921 16.8208 5.08667 15.7332 5.08667ZM12.3256 7.18927H13.7031V8.56683H12.3256V7.18927ZM14.3557 9.21936V10.5969H12.9781V9.21936H14.3557ZM12.3256 9.21936V10.5969H10.948V9.21936H12.3256ZM10.223 7.18927H11.6005V8.56683H10.223V7.18927ZM8.19289 7.18927H9.57045V8.56683H8.19289V7.18927ZM10.223 9.21936V10.5969H8.84542V9.21936H10.223ZM6.16279 7.18927H7.54035V8.56683H6.16279V7.18927ZM8.19289 9.21936V10.5969H6.81532V9.21936H8.19289ZM6.16279 9.21936V10.5969H4.78522V9.21936H6.16279ZM4.13269 7.18927H5.51026V8.56683H4.13269V7.18927ZM2.0301 7.18927H3.40766V8.56683H2.0301V7.18927ZM4.13269 9.21936V10.5969H2.75513V9.21936H4.13269ZM3.40766 12.627H2.0301V11.2495H3.40766V12.627ZM13.6306 12.627H4.13269V11.2495H13.7031V12.627H13.6306ZM15.7332 12.627H14.3557V11.2495H15.7332V12.627ZM15.7332 8.49433H14.3557V7.11677H15.7332V8.49433Z"
                            fill="#A6A6A6"/>
                      </svg>
                    </a>
                  </div>
                </div>
              </div>
              <div class="prw-next-btn">
                <button (click)="selectedTab = 0" class="flex items-center active" type="button">
                  <i class="icon-left_arrow mr-3"></i>
                  <h5>Back</h5>
                </button>
                <button (click)="validateTextEditor()" class="flex items-center active" type="button">
                  <h5>Next</h5>
                  <i class="icon-right_arrow ml-3"></i>
                </button>
              </div>
            </div>

            <div *ngIf="selectedTab == 2" class="space-y-8 px-2" id="stap-three">
              <div class="space-y-8 xl:space-y-10">
                <div>
                  <span class="input-titel">Equipment</span>
                  <div class="flex flex-wrap -mx-2">
                    <div class="w-1/2 px-2 pt-2 xl:pt-0">
                      <label class="bg-white py-4 px-5 h-full flex items-center rounded-md cursor-pointer"
                             for="include-equipment">
                        <div class="pr-3">
                          <input checked="" class="w-6 h-6 rounded-full bg-brightGray appearance-none hidden"
                                 id="include-equipment" name="equipment_included_in_ticket_price" type="radio" [value]="true" [formControlName]="'equipment_included_in_ticket_price'">
                          <div
                              class="w-6 h-6 flex items-center justify-center rounded-full bg-brightGray overflow-hidden check-language">
                            <i class="icon-right text-white text-[10px] scale-0 origin-center duration-300 transition-all"></i>
                          </div>
                        </div>
                        <div class="w-full flex items-center justify-between">
                          <span class="text-base font-bold text-black">Included Equipment in Ticket Price</span>
                          <img alt="contruction" src="../../assets/images/contruction1.png">
                        </div>
                      </label>
                    </div>
                    <div class="w-1/2 px-2 pt-2 xl:pt-0">
                      <label class="bg-white py-4 px-5 h-full flex items-center rounded-md cursor-pointer"
                             for="notinclude">
                        <div class="pr-3">
                          <input class="w-6 h-6 rounded-full bg-brightGray appearance-none hidden" id="notinclude"
                                 name="equipment_included_in_ticket_price" type="radio" [value]="false" [formControlName]="'equipment_included_in_ticket_price'">
                          <div
                              class="w-6 h-6 flex items-center justify-center rounded-full bg-brightGray overflow-hidden check-language">
                            <i class="icon-right text-white text-[10px] scale-0 origin-center duration-300 transition-all"></i>
                          </div>
                        </div>
                        <div><span class="text-base font-bold text-black">Not Included Equipment in Ticket Price</span></div>
                      </label>
                    </div>
                  </div>
                </div>
<!-- equpment photos -->
                <div *ngIf="selectedTab == 2" class="media-upload-holder pt-5" id="stap-two">
                  <div class="flex items-center justify-between">
                    <span class="text-sm text-quicksilver font-semibold">Add Photos <span class="font-normal">(15 Images - up to 5MB/Image & Resolution up to 1080PX x 1080PX)</span></span>
                    <a class="text-spiroDiscoBall text-sm font-bold opacity-60 hover:text-red-500" href="javascript:void(0);" (click)="openImageAndVideoDialog(etempImgArr, true, false)">View All</a>
                  </div>
                  <div class="flex flex-wrap h-full pt-2">
                    <div *ngFor="let photo of etempImgArr; let i = index" class="upload-box mr-2.5 mb-2.5">
                      <div class="rounded relative overflow-hidden h-full w-full group">
                        <img [alt]="'add-photo-' + i" [src]="!!(photo?.url) ? constants.baseImageURL + photo.url : constants.defaultImage" *ngIf="photo.url" class="object-cover w-full h-full"/>
                        <div class="opacity-0 bg-black bg-opacity-50 flex items-center justify-center group-hover:opacity-100 absolute inset-0 transition-all duration-300">
                          <button class="edit" (click)="editImageUpload('equipment', photo, i)">Edit</button>
                          <span class="block" (click)="openImageAndVideoDialog([photo], true, false)"><i class="pi pi-eye text-2xl text-white cursor-pointer" ></i></span>
                          <button (click)="removeImage('equipment', i)" class="remove">Remove</button>
                        </div>
                      </div>

                      

                      <div class="absolute inset-0 flex items-center justify-center bg-black/70 cursor-pointer z-10" *ngIf="openImages" (click)="openImages = !openImages">
                        <div class="max-w-xs">
                          <img [alt]="'add-photo-' + i" [src]="!!(viewEqpImagesDailog) ? constants.baseImageURL + viewEqpImagesDailog  : constants.defaultImage" *ngIf="photo.url" class="object-cover w-full h-full"/>                        
                        </div>
                      </div>
                    </div>
                    <div *ngIf="etempImgArr.length < 15" (click)="openUploadPhotoDialog()" class="upload-holder" >
                      <label class="upload-photo" for="event-upload1">
                        <!-- <input type="file" id="photo" name="photo" (change)="onFileChange($event, 'photo')" id="event-upload1" class="appearance-none hidden" accept="image/png, image/jpeg, image/gif" /> -->
                        <i class="icon-img_upload text-base text-quicksilver"></i>
                        <div class="mt-1 flex items-baseline justify-center"><span class="input-titel pt-1">Add Photos</span></div>
                      </label>
                    </div>
                  </div>
                </div>

                <div class="w-full">
                  <span class="input-titel">Equipment description?  <i class="text-xs font-medium" [ngClass]="{'text-magicPotion' : textEditorEquipment}">( {{textEditorLimitEquipment}} characters out of {{textEditorMaxLimit}} )</i></span>
                  <div class="w-full bg-white rounded">
                    <ckeditor (ready)="onTextEditorReady($event, 'equipment_description')" (keyup)="editorCharacterSetEquipment()" (keydown)="editorCharacterSetEquipment()" [config]="editorConfig" [editor]="detailEditor" [formControlName]="'equipment_description'" class="h-44 text-editor" id="equipment_description" name="equipment_description"></ckeditor>
                  </div>
                  <!-- <textarea class="outline-none flex items-center w-full bg-white p-2 px-3.5 rounded-tl-md rounded-tr-md placeholder:text-sm placeholder:text-[#a6a6a6] placeholder:font-bold" cols="30" rows="4" [formControlName]="'equipment_description'"></textarea> -->
                  <div class="flex items-center space-x-3 bg-white justify-end pr-4 pb-2 rounded-bl-md rounded-br-md">
                    <a href="javascript:void(0);">
                      <svg fill="none" height="13" viewBox="0 0 20 13" width="20" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M17.9986 0H2.00141C0.895243 0 0.00937427 0.831269 0.00937427 1.85839L0 11.1416C0 12.1687 0.895243 13 2.00141 13H17.9986C19.1048 13 20 12.1687 20 11.1416V1.85839C20 0.831269 19.1048 0 17.9986 0ZM9.92735 3.10311H11.0148L11.8725 4.50452C12.1162 4.90927 12.36 5.38366 12.5428 5.81453H12.5615C12.5006 5.30968 12.4818 4.79176 12.4818 4.22163V3.10311H13.3396V6.92869H12.36L11.4835 5.4533C11.2397 5.04419 10.9679 4.55239 10.7663 4.10412L10.7476 4.10847C10.771 4.61332 10.7851 5.153 10.7851 5.77536V6.92869H9.92735V3.10311ZM6.6651 3.10311H9.21022V3.81252H7.60253V4.60897H9.11648V5.30967H7.60253V6.21928H9.29459V6.92869H6.6651V3.10311ZM5.00117 7.42919H2.99977V5.57081H5.00117V7.42919ZM5.00117 4.64379H2.99977V2.7854H5.00117V4.64379ZM14.0005 11.1416H5.99953V9.28323H14.0005V11.1416ZM17.0002 7.42919H14.9988V5.57081H17.0002V7.42919ZM17.0002 4.64379H14.9988V2.7854H17.0002V4.64379Z"
                            fill="#A6A6A6"/>
                      </svg>
                    </a>
                    <a href="javascript:void(0);">
                      <svg fill="none" height="15" viewBox="0 0 18 15" width="18" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M8.91794 6.10077C10.7305 6.10077 11.8906 4.86822 11.8906 3.05563C11.8906 2.83812 11.8906 2.69311 11.8181 2.54811H8.84544V3.63566H10.5855C10.513 4.07068 10.078 5.01322 8.84544 5.01322C7.75788 5.01322 6.88784 4.14318 6.88784 3.05563C6.88784 1.96808 7.75788 1.09804 8.84544 1.09804C9.42546 1.09804 9.86048 1.38805 10.078 1.60556L10.948 0.808024C10.368 0.3005 9.71548 0.0104864 8.84544 0.0104864C7.25036 -0.13452 5.80029 1.24304 5.80029 2.98313C5.80029 4.6507 7.25036 6.10077 8.91794 6.10077Z"
                            fill="#A6A6A6"/>
                        <path
                            d="M15.7332 5.08667H11.8181C11.238 5.95671 10.223 6.53674 8.91792 6.53674C7.75786 6.53674 6.67031 5.95671 6.01778 5.08667H2.0301C0.942544 5.08667 0 6.02921 0 7.18927V12.627C0 13.7146 0.942544 14.6571 2.0301 14.6571H15.6607C16.8208 14.6571 17.6908 13.7146 17.6908 12.627V7.18927C17.7633 6.02921 16.8208 5.08667 15.7332 5.08667ZM12.3256 7.18927H13.7031V8.56683H12.3256V7.18927ZM14.3557 9.21936V10.5969H12.9781V9.21936H14.3557ZM12.3256 9.21936V10.5969H10.948V9.21936H12.3256ZM10.223 7.18927H11.6005V8.56683H10.223V7.18927ZM8.19289 7.18927H9.57045V8.56683H8.19289V7.18927ZM10.223 9.21936V10.5969H8.84542V9.21936H10.223ZM6.16279 7.18927H7.54035V8.56683H6.16279V7.18927ZM8.19289 9.21936V10.5969H6.81532V9.21936H8.19289ZM6.16279 9.21936V10.5969H4.78522V9.21936H6.16279ZM4.13269 7.18927H5.51026V8.56683H4.13269V7.18927ZM2.0301 7.18927H3.40766V8.56683H2.0301V7.18927ZM4.13269 9.21936V10.5969H2.75513V9.21936H4.13269ZM3.40766 12.627H2.0301V11.2495H3.40766V12.627ZM13.6306 12.627H4.13269V11.2495H13.7031V12.627H13.6306ZM15.7332 12.627H14.3557V11.2495H15.7332V12.627ZM15.7332 8.49433H14.3557V7.11677H15.7332V8.49433Z"
                            fill="#A6A6A6"/>
                      </svg>
                    </a>
                  </div>
                </div>
              </div>
              <div class="prw-next-btn">
                <button (click)="selectedTab = 1" class="flex items-center active" type="button">
                  <i class="icon-left_arrow mr-3"></i>
                  <h5>Back</h5>
                </button>
                <button class="secondary py-3 px-8 uppercase" type="button" [disabled]="!seatingForm.valid" (click)="addFormData()">
                  {{(editArrangementObj && editArrangementObj.seating_item) ? 'Update' : 'Add New'}}
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Photo -->
<modal class="popup table fixed w-full inset-0 z-40 bg-black bg-opacity-75 h-screen hidden" id="photo" title="Upload Photo" *ngIf="photoForm">
  <form #photosNgForm="ngForm" [formGroup]="photoForm" class="py-6 space-y-5">
    <div class="upload-holder- w-full">
      <h6 class="input-titel text-sm font-bold text-quicksilver flex items-center">Select Photo <p class="text-10 ml-2">15 Images (up to 5MB/Image)</p></h6>
      <!--  {{(posterImageAndVideoObj?.photos?.length) ? (posterImageAndVideoObj?.photos?.length + '(Already Uploaded) - 15 =') : ''}} {{ 15 - (posterImageAndVideoObj?.photos?.length || 0)}} -->
      <div class="block">
        <ngx-dropzone #dropzonePhotos class="flex-wrap" (change)="onSelectImages($event)" [maxFileSize]="5000000" accept="image/jpeg,image/jpg,image/png,image/gif">
          <ngx-dropzone-label>Drop images here</ngx-dropzone-label>
          <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of imagesFiles" [file]="f" [removable]="true" (removed)="onRemoveImages(f)"></ngx-dropzone-image-preview>
        </ngx-dropzone>
      </div>

      <div class="text-red-500 text-xs pt-1" *ngIf="rejectedPhotosList?.length">
        Rejected Photos ( Because of Maximum Image Size is 5 MB. ) :-
        <div>
          <span *ngFor="let rpl of rejectedPhotosList">{{rpl?.name}}, </span>
        </div>
      </div>
    </div>
    <div class="w-full">
      <span class="input-titel">Details <i class="text-xs font-medium" [ngClass]="{'text-magicPotion' : (descriptionLimit > constants.CKEditorCharacterLimit0)}">( {{descriptionLimit}} characters out of {{constants.CKEditorCharacterLimit0}} )</i></span>
      <textarea #imageDescription class="outline-none flex items-center w-full bg-white p-2 px-3.5 rounded-md" cols="30" rows="5" formControlName="description" (keyup)="descriptionLimit = imageDescription.value.length"></textarea>
    </div>
    <div class="w-full" *ngIf="isShowPrice">
      <span class="input-titel">Price</span>
      <input class="outline-none flex items-center w-full bg-white p-2 px-3.5 rounded-md" maxlength="4" placeholder="0" formControlName="price" type="number" fuseValidNumber pattern="/^-?\d+\.?\d*$/" onKeyPress="if(this.value.length==4) return false;"/>
    </div>
  </form>
  <button (click)="uploadImage()" class="secondary w-full uppercase py-2 anim" [disabled]="isPhotoLoading">{{ isPhotoLoading ? 'Please wait...' : 'Submit' }}</button>
</modal>

<!-- Start Edit Photo Modal -->
<modal class="popup table fixed w-full inset-0 z-40 bg-black bg-opacity-75 h-screen hidden" id="photoEdit" title="Edit Photo">
  <form #photoEditForm="ngForm" [formGroup]="photoUpdateForm" class="py-6 space-y-5">
    <div class="upload-holder- w-full">
      <h6 class="input-titel text-sm font-bold text-quicksilver flex items-center">Select Photo <p class="text-10 ml-2">(up to 5MB)</p></h6>

      <label class="upload upload-popup p-0 relative group" id="editPosterUpload">
        <input #editPoster (change)="onEditPosterChange($event)" accept="image/png, image/jpeg, image/gif" data-max-file-size="5M" class="editPoster hidden" id="editPoster" type="file" />
      </label>

    </div>
    <div class="w-full">
      <span class="input-titel">Details <i class="text-xs font-medium" [ngClass]="{'text-magicPotion' : (descriptionLimit > constants.CKEditorCharacterLimit0)}">( {{descriptionLimit}} characters out of {{constants.CKEditorCharacterLimit0}} )</i></span>
      <textarea #imageDescription class="outline-none flex items-center w-full bg-white p-2 px-3.5 rounded-md" cols="30" rows="5" formControlName="description" (keyup)="descriptionLimit = imageDescription.value.length"></textarea>
    </div>

    <div class="w-full" *ngIf="isShowPrice">
      <span class="input-titel">Price</span>
      <input class="outline-none flex items-center w-full bg-white p-2 px-3.5 rounded-md" maxlength="4" placeholder="0" formControlName="price" type="number" fuseValidNumber pattern="/^-?\d+\.?\d*$/" onKeyPress="if(this.value.length==4) return false;"/>
    </div>
  </form>
  <button (click)="editUploadImage()" class="secondary w-full uppercase py-2 anim" [disabled]="isPhotoLoading">{{ isPhotoLoading ? 'Please wait...' : 'Submit' }}</button>
</modal>
<!-- End Edit Photo Modal -->

<!-- Images and Video Delete conformation -->
<modal class="popup table fixed w-full inset-0 z-40 bg-black bg-opacity-75 h-screen hidden" id="remove-image-pop" title="Are you sure?" [isCloseHidden]="true" [isTitleHidden]="true">
  <div class="flex flex-wrap relative">
    <div class="w-full pb-8">
      <h3 class="w-full pb-2 normal-case">Delete {{deleteItemObj.type}}</h3>
      <p class="normal-case">Are you sure you want to delete {{deleteItemObj.type}}</p>
    </div>
    <div class="flex items-center justify-end space-x-5 w-full">
      <button type="button" class="primary py-2 px-14 anim uppercase" (click)="close()">Cancel</button>    
      <div class="relative">
        <button class="secondary py-2 px-14 anim uppercase" type="submit" (click)="deleteEvent()">
          <span [ngClass]="{'opacity-0': isDeleteLoading}">Delete</span>
        </button>
        <div class="absolute inset-0 text-white flex items-center" *ngIf="isDeleteLoading">
          <mat-progress-spinner [diameter]="22" [mode]="'indeterminate'" class="mx-auto"></mat-progress-spinner>
        </div>
      </div>
    </div>
  </div>
</modal>

<!-- popup images videos -->
<app-image-and-video-preview *ngIf="isOpenPopup" (openClosePopup)="closePop($event)"  [isImageOrVideoFlag]="isImage" [isCompanyImagesAndVideo]="companyIAndV" [expectedProp]="imagesOrVideosArr"></app-image-and-video-preview>